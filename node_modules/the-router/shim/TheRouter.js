'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _classnames = _interopRequireDefault(require("classnames"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireDefault(require("react"));

var _reactRouterDom = require("react-router-dom");

var _theComponentUtil = require("the-component-util");

/**
 * Router of the-components
 */
var TheRouter =
/*#__PURE__*/
function (_React$Component) {
  (0, _inherits2.default)(TheRouter, _React$Component);

  function TheRouter() {
    (0, _classCallCheck2.default)(this, TheRouter);
    return (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(TheRouter).apply(this, arguments));
  }

  (0, _createClass2.default)(TheRouter, [{
    key: "componentDidMount",
    value: function componentDidMount() {
      var _this = this;

      var _this$props = this.props,
          forceRefresh = _this$props.forceRefresh,
          history = _this$props.history;

      if (history) {
        this.unlisten = history.listen(function () {
          if (forceRefresh) {
            _this.forceUpdate();
          }
        });
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      var _this2 = this;

      var history = this.props.history;

      if (history) {
        var historyChanged = prevProps.history && prevProps.history !== history;

        if (historyChanged) {
          throw new Error('[TheRouter] You cannot change <TheRouter history>');
        }

        this.unlisten = history.listen(function () {
          _this2.forceUpdate();
        });
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.unlisten && this.unlisten();
    }
  }, {
    key: "render",
    value: function render() {
      var props = this.props;
      var basename = props.basename,
          children = props.children,
          className = props.className,
          getUserConfirmation = props.getUserConfirmation,
          history = props.history,
          keyLength = props.keyLength;
      var Router = history ? _reactRouterDom.Router : _reactRouterDom.BrowserRouter;
      return _react.default.createElement(Router, {
        basename: basename,
        getUserConfirmation: getUserConfirmation,
        history: history,
        keyLength: keyLength
      }, _react.default.createElement("div", (0, _extends2.default)({}, (0, _theComponentUtil.htmlAttributesFor)(props, {
        except: ['className']
      }), {
        className: (0, _classnames.default)('the-router', className)
      }), children));
    }
  }], [{
    key: "Hash",
    value: function Hash(_ref) {
      var basename = _ref.basename,
          children = _ref.children,
          getUserConfirmation = _ref.getUserConfirmation,
          hashType = _ref.hashType;
      return _react.default.createElement(_reactRouterDom.HashRouter, {
        basename: basename,
        getUserConfirmation: getUserConfirmation,
        hashType: hashType
      }, _react.default.createElement("div", {
        className: "the-router-hash"
      }, children));
    }
  }, {
    key: "Static",
    value: function Static(_ref2) {
      var basename = _ref2.basename,
          children = _ref2.children,
          context = _ref2.context,
          location = _ref2.location;
      return _react.default.createElement(_reactRouterDom.StaticRouter, {
        basename: basename,
        context: context,
        location: location
      }, _react.default.createElement("div", {
        className: "the-router-static"
      }, children));
    }
  }]);
  return TheRouter;
}(_react.default.Component);

TheRouter.propTypes = {};
TheRouter.defaultProps = {};
TheRouter.displayName = 'TheRouter';
var _default = TheRouter;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRoZVJvdXRlci5qc3giXSwibmFtZXMiOlsiVGhlUm91dGVyIiwicHJvcHMiLCJmb3JjZVJlZnJlc2giLCJoaXN0b3J5IiwidW5saXN0ZW4iLCJsaXN0ZW4iLCJmb3JjZVVwZGF0ZSIsInByZXZQcm9wcyIsImhpc3RvcnlDaGFuZ2VkIiwiRXJyb3IiLCJiYXNlbmFtZSIsImNoaWxkcmVuIiwiY2xhc3NOYW1lIiwiZ2V0VXNlckNvbmZpcm1hdGlvbiIsImtleUxlbmd0aCIsIlJvdXRlciIsIkFic3RyYWN0Um91dGVyIiwiQnJvd3NlclJvdXRlciIsImV4Y2VwdCIsImhhc2hUeXBlIiwiY29udGV4dCIsImxvY2F0aW9uIiwiUmVhY3QiLCJDb21wb25lbnQiLCJwcm9wVHlwZXMiLCJkZWZhdWx0UHJvcHMiLCJkaXNwbGF5TmFtZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQU1BOztBQUVBOzs7SUFHTUEsUzs7Ozs7Ozs7Ozs7O3dDQWlCZ0I7QUFBQTs7QUFBQSx3QkFDZ0IsS0FBS0MsS0FEckI7QUFBQSxVQUNWQyxZQURVLGVBQ1ZBLFlBRFU7QUFBQSxVQUNJQyxPQURKLGVBQ0lBLE9BREo7O0FBRWxCLFVBQUlBLE9BQUosRUFBYTtBQUNYLGFBQUtDLFFBQUwsR0FBZ0JELE9BQU8sQ0FBQ0UsTUFBUixDQUFlLFlBQU07QUFDbkMsY0FBSUgsWUFBSixFQUFrQjtBQUNoQixZQUFBLEtBQUksQ0FBQ0ksV0FBTDtBQUNEO0FBQ0YsU0FKZSxDQUFoQjtBQUtEO0FBQ0Y7Ozt1Q0FFa0JDLFMsRUFBVztBQUFBOztBQUFBLFVBQ3BCSixPQURvQixHQUNSLEtBQUtGLEtBREcsQ0FDcEJFLE9BRG9COztBQUc1QixVQUFJQSxPQUFKLEVBQWE7QUFDWCxZQUFNSyxjQUFjLEdBQUdELFNBQVMsQ0FBQ0osT0FBVixJQUFxQkksU0FBUyxDQUFDSixPQUFWLEtBQXNCQSxPQUFsRTs7QUFDQSxZQUFJSyxjQUFKLEVBQW9CO0FBQ2xCLGdCQUFNLElBQUlDLEtBQUosQ0FBVSxtREFBVixDQUFOO0FBQ0Q7O0FBQ0QsYUFBS0wsUUFBTCxHQUFnQkQsT0FBTyxDQUFDRSxNQUFSLENBQWUsWUFBTTtBQUNuQyxVQUFBLE1BQUksQ0FBQ0MsV0FBTDtBQUNELFNBRmUsQ0FBaEI7QUFHRDtBQUNGOzs7MkNBRXNCO0FBQ3JCLFdBQUtGLFFBQUwsSUFBaUIsS0FBS0EsUUFBTCxFQUFqQjtBQUNEOzs7NkJBRVE7QUFBQSxVQUNDSCxLQURELEdBQ1csSUFEWCxDQUNDQSxLQUREO0FBQUEsVUFHTFMsUUFISyxHQVNIVCxLQVRHLENBR0xTLFFBSEs7QUFBQSxVQUlMQyxRQUpLLEdBU0hWLEtBVEcsQ0FJTFUsUUFKSztBQUFBLFVBS0xDLFNBTEssR0FTSFgsS0FURyxDQUtMVyxTQUxLO0FBQUEsVUFNTEMsbUJBTkssR0FTSFosS0FURyxDQU1MWSxtQkFOSztBQUFBLFVBT0xWLE9BUEssR0FTSEYsS0FURyxDQU9MRSxPQVBLO0FBQUEsVUFRTFcsU0FSSyxHQVNIYixLQVRHLENBUUxhLFNBUks7QUFXUCxVQUFNQyxNQUFNLEdBQUdaLE9BQU8sR0FBR2Esc0JBQUgsR0FBb0JDLDZCQUExQztBQUNBLGFBQ0UsNkJBQUMsTUFBRCxFQUNNO0FBQ0ZQLFFBQUFBLFFBQVEsRUFBUkEsUUFERTtBQUVGRyxRQUFBQSxtQkFBbUIsRUFBbkJBLG1CQUZFO0FBR0ZWLFFBQUFBLE9BQU8sRUFBUEEsT0FIRTtBQUlGVyxRQUFBQSxTQUFTLEVBQVRBO0FBSkUsT0FETixFQVFFLCtEQUNNLHlDQUFrQmIsS0FBbEIsRUFBeUI7QUFBRWlCLFFBQUFBLE1BQU0sRUFBRSxDQUFDLFdBQUQ7QUFBVixPQUF6QixDQUROO0FBRUUsUUFBQSxTQUFTLEVBQUUseUJBQUUsWUFBRixFQUFnQk4sU0FBaEI7QUFGYixVQUlHRCxRQUpILENBUkYsQ0FERjtBQWlCRDs7OytCQTFFa0U7QUFBQSxVQUFyREQsUUFBcUQsUUFBckRBLFFBQXFEO0FBQUEsVUFBM0NDLFFBQTJDLFFBQTNDQSxRQUEyQztBQUFBLFVBQWpDRSxtQkFBaUMsUUFBakNBLG1CQUFpQztBQUFBLFVBQVpNLFFBQVksUUFBWkEsUUFBWTtBQUNqRSxhQUNFLDZCQUFDLDBCQUFELEVBQWdCO0FBQUVULFFBQUFBLFFBQVEsRUFBUkEsUUFBRjtBQUFZRyxRQUFBQSxtQkFBbUIsRUFBbkJBLG1CQUFaO0FBQWlDTSxRQUFBQSxRQUFRLEVBQVJBO0FBQWpDLE9BQWhCLEVBQ0U7QUFBSyxRQUFBLFNBQVMsRUFBQztBQUFmLFNBQWtDUixRQUFsQyxDQURGLENBREY7QUFLRDs7O2tDQUV3RDtBQUFBLFVBQXpDRCxRQUF5QyxTQUF6Q0EsUUFBeUM7QUFBQSxVQUEvQkMsUUFBK0IsU0FBL0JBLFFBQStCO0FBQUEsVUFBckJTLE9BQXFCLFNBQXJCQSxPQUFxQjtBQUFBLFVBQVpDLFFBQVksU0FBWkEsUUFBWTtBQUN2RCxhQUNFLDZCQUFDLDRCQUFELEVBQWtCO0FBQUVYLFFBQUFBLFFBQVEsRUFBUkEsUUFBRjtBQUFZVSxRQUFBQSxPQUFPLEVBQVBBLE9BQVo7QUFBcUJDLFFBQUFBLFFBQVEsRUFBUkE7QUFBckIsT0FBbEIsRUFDRTtBQUFLLFFBQUEsU0FBUyxFQUFDO0FBQWYsU0FBb0NWLFFBQXBDLENBREYsQ0FERjtBQUtEOzs7RUFmcUJXLGVBQU1DLFM7O0FBOEU5QnZCLFNBQVMsQ0FBQ3dCLFNBQVYsR0FBc0IsRUFBdEI7QUFFQXhCLFNBQVMsQ0FBQ3lCLFlBQVYsR0FBeUIsRUFBekI7QUFFQXpCLFNBQVMsQ0FBQzBCLFdBQVYsR0FBd0IsV0FBeEI7ZUFFZTFCLFMiLCJzb3VyY2VSb290IjoiLi4vbGliIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBjIGZyb20gJ2NsYXNzbmFtZXMnXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQge1xuICBCcm93c2VyUm91dGVyLFxuICBIYXNoUm91dGVyLFxuICBSb3V0ZXIgYXMgQWJzdHJhY3RSb3V0ZXIsXG4gIFN0YXRpY1JvdXRlcixcbn0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSdcbmltcG9ydCB7IGh0bWxBdHRyaWJ1dGVzRm9yIH0gZnJvbSAndGhlLWNvbXBvbmVudC11dGlsJ1xuXG4vKipcbiAqIFJvdXRlciBvZiB0aGUtY29tcG9uZW50c1xuICovXG5jbGFzcyBUaGVSb3V0ZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBzdGF0aWMgSGFzaCh7IGJhc2VuYW1lLCBjaGlsZHJlbiwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgaGFzaFR5cGUgfSkge1xuICAgIHJldHVybiAoXG4gICAgICA8SGFzaFJvdXRlciB7Li4ueyBiYXNlbmFtZSwgZ2V0VXNlckNvbmZpcm1hdGlvbiwgaGFzaFR5cGUgfX0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0aGUtcm91dGVyLWhhc2gnPntjaGlsZHJlbn08L2Rpdj5cbiAgICAgIDwvSGFzaFJvdXRlcj5cbiAgICApXG4gIH1cblxuICBzdGF0aWMgU3RhdGljKHsgYmFzZW5hbWUsIGNoaWxkcmVuLCBjb250ZXh0LCBsb2NhdGlvbiB9KSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxTdGF0aWNSb3V0ZXIgey4uLnsgYmFzZW5hbWUsIGNvbnRleHQsIGxvY2F0aW9uIH19PlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndGhlLXJvdXRlci1zdGF0aWMnPntjaGlsZHJlbn08L2Rpdj5cbiAgICAgIDwvU3RhdGljUm91dGVyPlxuICAgIClcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGNvbnN0IHsgZm9yY2VSZWZyZXNoLCBoaXN0b3J5IH0gPSB0aGlzLnByb3BzXG4gICAgaWYgKGhpc3RvcnkpIHtcbiAgICAgIHRoaXMudW5saXN0ZW4gPSBoaXN0b3J5Lmxpc3RlbigoKSA9PiB7XG4gICAgICAgIGlmIChmb3JjZVJlZnJlc2gpIHtcbiAgICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgY29uc3QgeyBoaXN0b3J5IH0gPSB0aGlzLnByb3BzXG5cbiAgICBpZiAoaGlzdG9yeSkge1xuICAgICAgY29uc3QgaGlzdG9yeUNoYW5nZWQgPSBwcmV2UHJvcHMuaGlzdG9yeSAmJiBwcmV2UHJvcHMuaGlzdG9yeSAhPT0gaGlzdG9yeVxuICAgICAgaWYgKGhpc3RvcnlDaGFuZ2VkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignW1RoZVJvdXRlcl0gWW91IGNhbm5vdCBjaGFuZ2UgPFRoZVJvdXRlciBoaXN0b3J5PicpXG4gICAgICB9XG4gICAgICB0aGlzLnVubGlzdGVuID0gaGlzdG9yeS5saXN0ZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLmZvcmNlVXBkYXRlKClcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy51bmxpc3RlbiAmJiB0aGlzLnVubGlzdGVuKClcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHByb3BzIH0gPSB0aGlzXG4gICAgY29uc3Qge1xuICAgICAgYmFzZW5hbWUsXG4gICAgICBjaGlsZHJlbixcbiAgICAgIGNsYXNzTmFtZSxcbiAgICAgIGdldFVzZXJDb25maXJtYXRpb24sXG4gICAgICBoaXN0b3J5LFxuICAgICAga2V5TGVuZ3RoLFxuICAgIH0gPSBwcm9wc1xuXG4gICAgY29uc3QgUm91dGVyID0gaGlzdG9yeSA/IEFic3RyYWN0Um91dGVyIDogQnJvd3NlclJvdXRlclxuICAgIHJldHVybiAoXG4gICAgICA8Um91dGVyXG4gICAgICAgIHsuLi57XG4gICAgICAgICAgYmFzZW5hbWUsXG4gICAgICAgICAgZ2V0VXNlckNvbmZpcm1hdGlvbixcbiAgICAgICAgICBoaXN0b3J5LFxuICAgICAgICAgIGtleUxlbmd0aCxcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHsuLi5odG1sQXR0cmlidXRlc0Zvcihwcm9wcywgeyBleGNlcHQ6IFsnY2xhc3NOYW1lJ10gfSl9XG4gICAgICAgICAgY2xhc3NOYW1lPXtjKCd0aGUtcm91dGVyJywgY2xhc3NOYW1lKX1cbiAgICAgICAgPlxuICAgICAgICAgIHtjaGlsZHJlbn1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L1JvdXRlcj5cbiAgICApXG4gIH1cbn1cblxuVGhlUm91dGVyLnByb3BUeXBlcyA9IHt9XG5cblRoZVJvdXRlci5kZWZhdWx0UHJvcHMgPSB7fVxuXG5UaGVSb3V0ZXIuZGlzcGxheU5hbWUgPSAnVGhlUm91dGVyJ1xuXG5leHBvcnQgZGVmYXVsdCBUaGVSb3V0ZXJcbiJdfQ==